---
import i18n, { languages } from "src/lib/i18n";

type Link = {
  label: string;
  path: string;
};

const currentLocale = Astro.currentLocale;
const url = Astro.request.url;
console.log("Url: ", url);
const x = languages.map((l) => ({
  lang: l,
  nav: url.replace(Astro.currentLocale!, l),
}));
console.log("x: ", x);

const links: Link[] = [
  { tag: "nav.home", path: "/" },
  { tag: "nav.booking", path: "/booking" },
  { tag: "nav.establishments", path: "/establishment" },
].map((i) => ({ label: i18n.t(i.tag), path: `/${currentLocale}${i.path}` }));
---

<nav>
  <ul class="flex space-x-10 py-5 items-center justify-center">
    {
      links.map((l) => (
        <li>
          <a href={l.path}>{l.label}</a>
        </li>
      ))
    }
    <ul>
      {
        x.map((y) => (
          <li>
            <a href={y.nav}>{y.lang}</a>
          </li>
        ))
      }
    </ul>
  </ul>
</nav>
